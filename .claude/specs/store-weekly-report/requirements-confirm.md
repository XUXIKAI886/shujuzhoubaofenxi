# 数据统计周报系统需求确认文档

## 原始需求
用户需要一个数据统计周报web应用，用于美团外卖店铺的周数据分析和报告生成。

## 需求澄清过程

### 第一轮澄清 (初始得分: 75/100)
- 功能结构基本明确
- 技术栈和API配置详细
- 缺少数据验证、用户体验等细节

### 第二轮澄清 (用户回复确认)
用户明确了以下关键细节：
- 数值类型：曝光人数、入店人数、下单人数为整数；转化率、复购率为百分比输入
- 必填字段：除点金推广外，其他字段均为必填
- 报告格式：支持图表、表格和文字的HTML报告
- 功能简化：不需要响应式设计、数据保存、历史记录

## 最终确认需求

### 功能模块
1. **店铺基本信息输入**（必填）
   - 店铺名称（文本）
   - 经营品类（文本）
   - 店铺地址（文本）
   - 营业时间（文本）

2. **店铺数据输入**（必填）
   - **本周数据**：
     - 曝光人数（整数）
     - 入店人数（整数）
     - 入店转化率（百分比，0-100%）
     - 下单转化率（百分比，0-100%）
     - 下单人数（整数）
     - 复购率（百分比，0-100%）
   - **上周数据**：同上结构

3. **点金推广数据输入**（可选）
   - 显示开启/关闭切换
   - **本周点金数据**：
     - 推广花费（数值）
     - 推广曝光量（整数）
     - 推广进店量（整数）
     - 进店率（百分比）
     - 单次进店成本（数值）
   - **上周点金数据**：同上结构

4. **报告生成功能**
   - 调用大模型API生成智能分析报告
   - 报告格式：HTML（包含图表、表格、文字分析）
   - 环比分析：显示本周与上周数据对比
   - 优化建议：基于美团外卖运营知识提供专业建议

### 技术规格
- **框架**：Next.js (App Router)
- **语言**：TypeScript
- **样式**：Tailwind CSS
- **UI组件**：shadcn/ui
- **图标**：Lucide React
- **部署**：Vercel

### API配置
- **baseUrl**：'https://haxiaiplus.cn/v1/chat/completions'
- **apiKey**：'sk-BIChztSl1gwRjl06f5DZ3J15UMnLGgEBpiJa00VHTsQeI00N'
- **model**：'gemini-2.5-flash-lite-preview-06-17'
- **temperature**：0.8
- **max_tokens**：16384
- **timeout**：360000

### 数据验证规则
- 整数字段：非负整数
- 百分比字段：0-100范围
- 文本字段：非空验证
- 转化率逻辑验证：入店人数 ≤ 曝光人数，下单人数 ≤ 入店人数

### 用户体验
- 桌面端优化（无需响应式）
- 生成报告时显示加载状态
- API失败时显示错误提示
- 表单验证实时反馈
- 报告在新页面或弹窗中展示
- 无需数据保存或历史记录功能

## 需求质量得分：92/100

- **功能清晰度** (30/30)：✅ 所有输入输出明确定义
- **技术特性** (23/25)：✅ 技术栈明确，API详细，缺少错误处理细节
- **实现完整性** (24/25)：✅ 数据验证、边界情况明确
- **业务背景** (20/20)：✅ 美团外卖运营知识充分，用户价值明确

需求已达到实施标准！